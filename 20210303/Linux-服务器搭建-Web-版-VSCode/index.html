<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux 服务器搭建 Web 版 VSCode | Lyh's Blog</title><meta name="keywords" content="IDE"><meta name="author" content="Lyh,gdleeyh@gmail.com"><meta name="copyright" content="Lyh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="关于VS Code的一些二次开发产品以及Web IDE">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 服务器搭建 Web 版 VSCode">
<meta property="og:url" content="https://hexo.lyh.best/20210303/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode/index.html">
<meta property="og:site_name" content="Lyh&#39;s Blog">
<meta property="og:description" content="关于VS Code的一些二次开发产品以及Web IDE">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://photo.lyh.best/2021/03/03/36661ed1a7d26.png">
<meta property="article:published_time" content="2021-03-03T12:47:04.000Z">
<meta property="article:modified_time" content="2023-10-29T14:51:50.490Z">
<meta property="article:author" content="Lyh">
<meta property="article:tag" content="IDE">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://photo.lyh.best/2021/03/03/36661ed1a7d26.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://hexo.lyh.best/20210303/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Lyh","link":"链接: ","source":"来源: Lyh's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2023-10-29 22:51:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = '1'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Lyh's Blog" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://lyh.best/images/me.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">42</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">24</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">2</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/index.html"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#github1s"><span class="toc-text">github1s</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebIDE"><span class="toc-text">WebIDE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode-%E4%BD%9C%E4%B8%BA%E4%BA%91%E7%AB%AFIDE"><span class="toc-text">搭建 Web 版 VSCode 作为云端IDE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VSCode"><span class="toc-text">VSCode</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CentOS7-%E9%83%A8%E7%BD%B2"><span class="toc-text">CentOS7 部署</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%92%E6%9F%A5%E6%95%85%E9%9A%9C"><span class="toc-text">排查故障</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-Server"><span class="toc-text">Code-Server</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E9%83%A8%E7%BD%B2"><span class="toc-text">常规部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker%E9%83%A8%E7%BD%B2"><span class="toc-text">Docker部署</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text">参考资料</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://photo.lyh.best/2021/03/03/36661ed1a7d26.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lyh's Blog</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/index.html"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-link"></i><span> 留言板</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Linux 服务器搭建 Web 版 VSCode</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-03T12:47:04.000Z" title="发表于 2021-03-03 20:47:04">2021-03-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-29T14:51:50.490Z" title="更新于 2023-10-29 22:51:50">2023-10-29</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>5分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><img src="https://photo.lyh.best/2021/03/03/55e9728ef580a.png" alt="CoderIDE"></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Visual Studio Code 是微软的一款代码编辑器，使用 TypeScript + Electron 开发。曾经在 Ubuntu 使用 ROS 的时候，就发现默认的安装的 IDE 竟然和 VS Code 像素级相似，然后知道它作为开源的项目可以成二次开发各式各样的产品，直到最近大火的 github1s 项目，让我重新对 VS Code 好奇起来。同时也顺手在 VPS 上搭建了个云端 IDE 方便在外的时候也能够用 iPad 在浏览器里修改下代码。</p>
<h3 id="github1s"><a href="#github1s" class="headerlink" title="github1s"></a>github1s</h3><p><img src="https://img.hellogithub.com/hellogithub/59/img/github1s.gif" alt="github1s"><br>最近有一个比较火的项目上线半个月就收获了 15.8k 个 star，继续在浏览器地址栏 GitHub 域名中 “github” 后面添加 “1s”，就能通过 VS Code 界面直接预览 GitHub 上的各类项目代码。<strong>注意仅是只读的，不能在线编辑</strong>。</p>
<p>github1s（项目地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/conwnet/github1s">https://github.com/conwnet/github1s</a>），是一款纯静态的 Web 应用程序，目前基于 VS Code 1.52.1，核心原理使用 GitHub REST API 实现一个带 FileSystemProvider 的VS Code Extension。网站直接使用 GitHub Page 托管。由于对未授权的请求，API 的请求频率是有限制的，每个 IP 每小时访问限制是60次，如果遇到了 Rate Limiting 只要点击 Generate New OAuth Token 跳到自己的 GitHub Setting 页面，生成一个 Token ，在 github1s 中填入 OAuth Token 就可以提升到 5000 次啦。<br>还有一个配套同名的 Chrome 插件，只要上 chrome web store 上搜索 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://chrome.google.com/webstore/search/github1s">github1s</a> 即可得。</p>
<h3 id="WebIDE"><a href="#WebIDE" class="headerlink" title="WebIDE"></a>WebIDE</h3><p>通过浏览器访问IDE，实现云端开发环境获取、代码编写、编译调试、运行预览、访问代码仓库、命令行执行等能力，同时支持丰富的插件扩展。<br>可以让开发者拥有一个统一、标准化的开发环境，节省了安装配置和维护组件的成本，可以更加专注于开发本身。<br>WebIDE已经有了一段时间的发展，不同的组织和厂商，先后推出了多种工具和产品。</p>
<ul>
<li>AWS Cloud9：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/features/codespaces">https://aws.amazon.com/cloud9/</a></li>
<li>Eclipse Che：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/features/codespaces">http://www.eclipse.org/che/</a></li>
<li>腾讯扣钉：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/features/codespaces">https://cloudstudio.net/</a></li>
<li>repl.it：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/features/codespaces">https://repl.it/</a><br>GitLab、Gitee等开源代码托管服务也先后发布了 WebIDE 功能。<br>例如，Github 推出了基于 VS Code 的的 Codespaces <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/features/codespaces">https://github.com/features/codespaces</a><br>Codespaces 集成浏览器版 VS Code 编辑器，支持代码补全、导航、扩展、终端访问等功能，具备完整的 Visual Studio Code 体验。</li>
</ul>
<h2 id="搭建-Web-版-VSCode-作为云端IDE"><a href="#搭建-Web-版-VSCode-作为云端IDE" class="headerlink" title="搭建 Web 版 VSCode 作为云端IDE"></a>搭建 Web 版 VSCode 作为云端IDE</h2><h3 id="VSCode"><a href="#VSCode" class="headerlink" title="VSCode"></a>VSCode</h3><p>VS Code 1.40 之后，开发者已经可以直接从 VS Code 的源代码编译出 Web 版 VS Code。更多内容，查看 VS Code 1.40 的发布说明： <a target="_blank" rel="external nofollow noopener noreferrer" href="https://code.visualstudio.com/updates/v1_40">https://code.visualstudio.com/updates/v1_40</a></p>
<h4 id="CentOS7-部署"><a href="#CentOS7-部署" class="headerlink" title="CentOS7 部署"></a>CentOS7 部署</h4><p>安装依赖：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install -y make  <span class="comment"># make</span></span><br><span class="line">pkg-config --version  <span class="comment"># pkg-config</span></span><br><span class="line">yum groupinstall -y <span class="string">&quot;Development Tools&quot;</span>  <span class="comment"># GCC or another compile toolchain：</span></span><br><span class="line">yum install -y libX11-devel.x86_64 libxkbfile-devel.x86_64  <span class="comment"># native-keymap</span></span><br><span class="line">yum install -y libsecret-devel  <span class="comment"># keytar</span></span><br></pre></td></tr></table></figure>
<p>安装Node.js和npm：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://rpm.nodesource.com/setup_10.x | bash -</span><br><span class="line">yum install -y nodejs</span><br><span class="line">node --version</span><br><span class="line">npm --version</span><br></pre></td></tr></table></figure>
<p>安装yarn：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo</span><br><span class="line">yum install -y yarn</span><br><span class="line">yarn --version</span><br></pre></td></tr></table></figure>
<p>拉取vscode源码：<br>通过wget命令下载zip包，然后解压。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/microsoft/vscode/archive/1.45.1.zip</span><br><span class="line">unzip 1.45.1.zip</span><br></pre></td></tr></table></figure>
<p>或者，通过git clone命令下载。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 1 --branch 1.45.1 https://github.com/microsoft/vscode.git</span><br></pre></td></tr></table></figure>
<ul>
<li>参数“–depth 1”  表示最近一次 commit 的代码</li>
<li>参数“–branch 1.45.1”  表示tag 1.45.1</li>
</ul>
<p>在代码根目录下，执行 yarn 命令安装依赖，用时较久，耐心等待</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> vscode-1.45.1/</span><br><span class="line">yarn</span><br></pre></td></tr></table></figure>
<p>运行Web VS Code<br>执行 yarn watch 命令 (watch是在package.json文件中scripts属性指定的命令)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn watch</span><br></pre></td></tr></table></figure>
<p>在执行 yarn watch 命令之后，执行 yarn web 命令构建 Web 版本的VS code</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn web</span><br></pre></td></tr></table></figure>
<p>执行 yarn web 命令时， 可以指定Host和Port<br>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn web --host 127.0.0.1 --port 8080</span><br></pre></td></tr></table></figure>
<p>注意：非本机访问，需要开启防火墙规则 或者 关闭防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启防火墙端口</span></span><br><span class="line">firewall-cmd --zone=public --permanent --add-port=8080/tcp</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭并禁止开机启动防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure>
<h5 id="排查故障"><a href="#排查故障" class="headerlink" title="排查故障"></a>排查故障</h5><ol>
<li>error Command failed with signal “SIGKILL”.<br>一般因为内存不足，进程被系统强杀了，加够 swap 空间可以解决。</li>
</ol>
<h3 id="Code-Server"><a href="#Code-Server" class="headerlink" title="Code-Server"></a>Code-Server</h3><p>code-server的官网: <a target="_blank" rel="external nofollow noopener noreferrer" href="https://coder.com/">https://coder.com/</a><br>项目仓库：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server">https://github.com/cdr/code-server</a><br><img src="https://github.com/cdr/code-server/raw/main/docs/assets/screenshot.png" alt="code server"></p>
<p>code-server 是 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://coder.com/">Coder公司</a> 基于VSCode的开源项目，可以实现通过浏览器访问在远程服务器上的VS Code。<br>简单地说，是基于 VSCode 进行了一些修改，专门为浏览器设计优化，以便作为可托管的 Web 服务来运行。<br>换而言之，配置服务器端（code-server）后，就可以在任何浏览器上访问和使用 VS Code。<br>此外，Coder还提供了sshcode工具（Run VS Code on any server over SSH.） <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/sshcode">https://github.com/cdr/sshcode</a><br>相关文档：</p>
<ul>
<li>总体概述：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server/blob/master/README.md">https://github.com/cdr/code-server/blob/master/README.md</a></li>
<li>安装：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server/blob/master/doc/install.md">https://github.com/cdr/code-server/blob/master/doc/install.md</a></li>
<li>设置指引：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server/blob/master/doc/guide.md">https://github.com/cdr/code-server/blob/master/doc/guide.md</a></li>
<li>常见问答：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server/blob/master/doc/FAQ.md">https://github.com/cdr/code-server/blob/master/doc/FAQ.md</a></li>
</ul>
<p>建议配置：</p>
<ul>
<li>1 GB of RAM</li>
<li>2 cores</li>
</ul>
<p>安装教程：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/cdr/code-server/blob/main/docs/install.md">https://github.com/cdr/code-server/blob/main/docs/install.md</a></p>
<h4 id="常规部署"><a href="#常规部署" class="headerlink" title="常规部署"></a>常规部署</h4><p>安装脚本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://code-server.dev/install.sh | sh</span><br></pre></td></tr></table></figure>
<p>运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./code-server</span><br></pre></td></tr></table></figure>
<p>以守护进程运行:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now code-server@<span class="variable">$USER</span></span><br></pre></td></tr></table></figure>
<p>访问<a target="_blank" rel="external nofollow noopener noreferrer" href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a>即可。<br>登陆密码记录在<code>~/.config/code-server/config.yaml</code></p>
<h4 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h4><p>docker一键搭建:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -p 8080:8080 \</span><br><span class="line">  --restart=always \</span><br><span class="line">  --name codeserver \</span><br><span class="line">  -h vscode \</span><br><span class="line">  -u root \</span><br><span class="line">  -v /tmp/coder-data:/home \</span><br><span class="line">  -v /tmp/coder-config:/root \</span><br><span class="line">  -v /etc/localtime:/etc/localtime:ro \</span><br><span class="line">  -e PASSWORD=mycodeserver \</span><br><span class="line">  codercom/code-server:3.4.1 </span><br></pre></td></tr></table></figure>
<p>注意：-e PASSWORD=mycodeserver 设置密码为mycodeserver。</p>
<p>最新版本能连接上了扩展商店，轻松安装语言包，Live Server 等拓展，还有其他的拓展可通过 .VSIX 离线包获取。VSCode扩展商店网页版：<a target="_blank" rel="external nofollow noopener noreferrer" href="https://marketplace.visualstudio.com/vscode">https://marketplace.visualstudio.com/vscode</a>搜索扩展，进入到详情页之后，选择右下角的Download Extension下载离线包。之后在扩展界面选择Install from VSIX，选择路径安装。</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.cnblogs.com/anliven/p/13363811.html">VSC - VS Code 运行Web IDE</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:gdleeyh@gmail.com" rel="external nofollow noopener noreferrer" target="_blank">Lyh</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://hexo.lyh.best/20210303/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode/">https://hexo.lyh.best/20210303/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="external nofollow noopener noreferrer">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hexo.lyh.best" target="_blank">Lyh's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/IDE/">IDE</a></div><div class="post_share"><div class="social-share" data-image="https://photo.lyh.best/2021/03/03/36661ed1a7d26.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/20210306/GDUT%E7%B2%A4%E6%B8%AF%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%AD%A6%E9%99%A2/"><img class="prev-cover" src="https://i.loli.net/2020/10/28/nabOY3419j6VXiP.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">GDUT粤港机器人学院简介</div></div></a></div><div class="next-post pull-right"><a href="/20210301/%E5%BC%95%E7%94%A8GitHub%E7%9A%84%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/"><img class="next-cover" src="https://free.com.tw/blog/wp-content/uploads/2017/12/rawgit.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">引用GitHub的静态资源文件</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Livere</span><label><input id="switch-comments-btn" type="checkbox"><span class="slider"></span></label><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81MTgwOC8yODI4OQ=="></div></div><div><div id="disqus_thread"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Lyh</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  var script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://hexo.lyh.best/20210303/Linux-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%90%AD%E5%BB%BA-Web-%E7%89%88-VSCode/'
    this.page.identifier = '20210303/Linux-服务器搭建-Web-版-VSCode/'
    this.page.title = 'Linux 服务器搭建 Web 版 VSCode'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://lyhbest.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Livere' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script></div></body></html>